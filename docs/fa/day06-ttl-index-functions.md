# ุฑูุฒ ุดุดู - ุชุณูุท ุจุฑ TTLุ ุงูุฏฺฉุณโูุง ุซุงููู ู ุชูุงุจุน ุฏุงุฎู ุฏุฑ ุขูพุงฺ ฺฉุงุณุงูุฏุฑุง

![ููฺฏู ฺฉุงุณุงูุฏุฑุง](https://img.shields.io/badge/Apache%20Cassandra-1287B1?style=flat&logo=apache-cassandra&logoColor=white)
[![ูุฌูุฒ: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![ุณุชุงุฑูโูุง ฺฏุชโูุงุจ](https://img.shields.io/github/stars/mrkeshi/cassandra-journey-10days?style=social)](https://github.com/mrkeshi/cassandra-journey-10days)

ุจู **ุฑูุฒ ุดุดู** ุงุฒ ุณูุฑ ุงุฏฺฏุฑ ุขูพุงฺ ฺฉุงุณุงูุฏุฑุง ุฎูุด ุขูุฏุฏ! ๐ ุงูุฑูุฒ ุจู ุณู ููุถูุน ฺฉูุฏ ูโูพุฑุฏุงุฒู: **TTL (ุฒูุงู ุฒูุฏู ูุงูุฏู)**ุ **ุงูุฏฺฉุณโูุง ุซุงููู** ู **ุชูุงุจุน ุฏุงุฎู** ุฏุฑ ุฒุจุงู ูพุฑุณโูุฌู ฺฉุงุณุงูุฏุฑุง (CQL). ุงู ูุงุจูุชโูุง ุจู ุดูุง ุงูฺฉุงู ูโุฏููุฏ ุชุง ุงููุถุง ุฏุงุฏูโูุง ุฑุง ูุฏุฑุช ฺฉูุฏุ ุฑู ุณุชููโูุง ุบุฑฺฉูุฏ ูพุฑุณโูุฌู ฺฉูุฏ ู ุงุฒ ุชูุงุจุน ูุฏุฑุชููุฏ ุจุฑุง ฺฉุงุฑ ุจุง ุฏุงุฏูโูุง ุงุณุชูุงุฏู ฺฉูุฏ. ๐

ุชุง ุญุงูุง ุจุง ููุงูู ูพุงู ฺฉุงุณุงูุฏุฑุงุ ูุตุจุ ูพุฑุณโูุฌููุง CQL ู ูุฏูโุณุงุฒ ุฏุงุฏู ุขุดูุง ุดุฏุฏ. ุฏุฑ ุงู ุฑุงูููุงุ ุงู ููุถูุนุงุช ุฑู ฺฏุงูโุจูโฺฏุงู ุจุง ุชูุถุญุงุช ุณุงุฏูุ ูุซุงูโูุง ุนูู ู ุชูุฑูโูุง ุจุฑุง ุชุซุจุช ุงุฏฺฏุฑ ุจุฑุฑุณ ูโฺฉูู. ุจุงุฏ ุงู ูุจุงุญุซ ุฑู ุฌุฐุงุจ ู ฺฉุงุฑุจุฑุฏ ฺฉูู! ๐ช

---

## ๐ ููุฏููโุง ุจุฑ TTLุ ุงูุฏฺฉุณโูุง ุซุงููู ู ุชูุงุจุน ุฏุงุฎู

ุฏุฑ ุงุฏุงูู ู ูุฑูุฑ ุณุฑุน ุงุฒ ููุถูุนุงุช ุงูุฑูุฒ ุฏุงุฑู:

- **TTL (ุฒูุงู ุฒูุฏู ูุงูุฏู)**: ูุดุฎุต ูโฺฉูู ู ุฏุงุฏู (ุณุชูู ุง ุณููู) ุชุง ฺู ูุฏุช ุชู ฺฉุงุณุงูุฏุฑุง ูุนุชุจุฑู ู ุจุนุฏุด ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุญุฐู ูโุดู. ุจุฑุง ุฏุงุฏูโูุง ูููุช ูุซู ฺฉุฏูุง OTP ุง ุชูฺฉูโูุง ุฌูุณู ุนุงูู.
- **ุงูุฏฺฉุณ ุซุงููู**: ุจู ุดูุง ุงูฺฉุงู ูโุฏู ุฑู ุณุชููโูุง ฺฉู ฺฉูุฏ ุงุตู ูุณุชู ูพุฑุณโูุฌู ฺฉูุฏุ ูู ุจุงุฏ ูุฑุงูุจ ฺฉุงุฑุง ุจุงุดุฏ.
- **ุชูุงุจุน ุฏุงุฎู**: CQL ุชูุงุจุน ูุซู `TTL()`ุ `WRITETIME()`ุ `now()` ู `count()` ุฏุงุฑู ฺฉู ุจุฑุง ฺฉุงุฑ ุจุง ูุชุงุฏุชุง ุง ูุญุงุณุจุงุช ุจู ฺฉุงุฑ ูโุฑู.

ุชู ุงู ุฑุงูููุง:
- ูุฑ ููููู ุฑู ุจุง ุฌุฒุฆุงุช ุณุงุฏู ู ูุงุจู ููู ุชูุถุญ ูโุฏู ๐
- ูุซุงูโูุง ุนูู ุจุง ุณูุงุฑููุง ูุงูุน ุงุฑุงุฆู ูโฺฉูู ๐๏ธ
- ุจูุชุฑู ุฑูุดโูุง ู ูุญุฏูุฏุชโูุง ุฑู ูุดุฎุต ูโฺฉูู โ๏ธ
- ุชูุฑูโูุง ุจุฑุง ุชุณุช ุฏุงูุด ุดูุง ูโุฐุงุฑู ๐ง
- ุจู ุณูุงูุงุช ุฑุงุฌ (ูุซู ยซTTL ุจุฑุง ุณุทุฑู ุง ุณุชููุยป) ุฌูุงุจ ูโุฏู

ุจุงุฏ ุดุฑูุน ฺฉูู! ๐

---

## ๐ ุจุฎุด ุงูู: TTL (ุฒูุงู ุฒูุฏู ูุงูุฏู) โ ูุฏุฑุช ุงููุถุง ุฏุงุฏูโูุง

### โ TTL ฺูุ

TTL (ุฒูุงู ุฒูุฏู ูุงูุฏู) ุชู ฺฉุงุณุงูุฏุฑุง ูุดุฎุต ูโฺฉูู ู ุฏุงุฏู (ู ุณุชูู ุง ุณููู) ุชุง ฺู ูุฏุช ุชู ุฏุชุงุจุณ ูโูููู. ุจุนุฏ ุงุฒ ุชููู ุดุฏู TTLุ ฺฉุงุณุงูุฏุฑุง ุฏุงุฏู ุฑู ุจูโุนููุงู *tombstone* ุนูุงูุชโฺฏุฐุงุฑ ูโฺฉูู ู ุท ูุฑุขูุฏ ูุดุฑุฏูโุณุงุฒ (compaction) ุญุฐูุด ูโฺฉูู.

### ๐ฏ ฺุฑุง TTL ููููุ

TTL ุจุฑุง ุงู ููุงุฑุฏ ุฎู ฺฉุงุฑุจุฑุฏู:
- **ูพุงฺฉโุณุงุฒ ุฎูุฏฺฉุงุฑ**: ุญุฐู ุฏุงุฏูโูุง ูููุช ูุซู ฺฉุฏูุง OTPุ ุชูฺฉูโูุง ุฌูุณู ุง ูุชุงุฌ ฺฉุดโุดุฏู.
- **ุจูููโุณุงุฒ ูุถุง ุฐุฎุฑูโุณุงุฒ**: ุฌูู ุฑุดุฏ ุจโุฑูู ุฏุชุงุจุณ ุฑู ูโฺฏุฑู.
- **ููุงุฑุฏ ุงุณุชูุงุฏู**: ุงุนูุงูโูุง ูููุชุ ุฌูุณุงุช ฺฉุงุฑุจุฑ ุง ุฏุงุฏูโูุง ุชุจูุบุงุช.

### ๐๏ธ ูุซุงูโูุง ุนูู

ุจุงุฏ ุจุง ู ุฌุฏูู ููููู ุจุฑุง ุฐุฎุฑู ฺฉุฏูุง ุชุฃุฏ ูุฑูุฏ ฺฉุงุฑ ฺฉูู.

#### ๐ฆ ุชุนุฑู ุฌุฏูู

```sql
CREATE TABLE login_codes (
    phone TEXT PRIMARY KEY,
    code TEXT
);
```

#### โ ูุซุงู ฑ: ุฏุฑุฌ ุฑุฏู ุจุง TTL

ู ฺฉุฏ ุชุฃุฏ ุฑู ูุงุฑุฏ ูโฺฉูู ฺฉู ุจุนุฏ ุงุฒ ต ุฏููู (ณฐฐ ุซุงูู) ูููุถ ุจุดู.

```sql
INSERT INTO login_codes (phone, code)
VALUES ('09123456789', '8293')
USING TTL 300;
```

**ฺ ุฏุงุฑู ุงุชูุงู ูโุงูุชูุ**
- ุงู ุฑุฏู (`phone`, `code`) ุจุนุฏ ุงุฒ ณฐฐ ุซุงูู ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุญุฐู ูโุดู.
- ุจุฑุง ุณุณุชูโูุง ฺฉุฏ ฺฉโุจุงุฑูุตุฑู (OTP) ุนุงูู.

#### โ ูุซุงู ฒ: ุขูพุฏุช ุณุชูู ุจุง TTL

ฺฉุฏ ูุฑุจูุท ุจู ู ุดูุงุฑู ุชููู ุฑู ุจุง TTL ุฌุฏุฏ ฑฐ ุฏููู (ถฐฐ ุซุงูู) ุขูพุฏุช ูโฺฉูู.

```sql
UPDATE login_codes
USING TTL 600
SET code = '5932'
WHERE phone = '09123456789';
```

**ฺ ุฏุงุฑู ุงุชูุงู ูโุงูุชูุ**
- ููุท ุณุชูู `code` ู TTL ุจู ูุฏุช ถฐฐ ุซุงูู ูโฺฏุฑู.
- ุณุชูู `phone` (ฺฉูุฏ ุงุตู) ุชุญุช ุชุฃุซุฑ ูุฑุงุฑ ููโฺฏุฑู.

#### โ ูุซุงู ณ: ุชูุธู TTL ูพุดโูุฑุถ ุจุฑุง ุฌุฏูู

ู ุฌุฏูู ุจุฑุง ูุงูโูุง ูููุช ูโุณุงุฒู ฺฉู TTL ูพุดโูุฑุถ ฒด ุณุงุนุช (ธถดฐฐ ุซุงูู) ุฏุงุฑู.

```sql
CREATE TABLE temp_files (
    id UUID PRIMARY KEY,
    filename TEXT,
    uploaded_at TIMESTAMP
)
WITH default_time_to_live = 86400;
```

**ฺ ุฏุงุฑู ุงุชูุงู ูโุงูุชูุ**
- ูุฑ ุฑุฏู ฺฉู ุชู ุงู ุฌุฏูู ูุงุฑุฏ ุจุดูุ ุจุนุฏ ุงุฒ ฒด ุณุงุนุช ูููุถ ูโุดูุ ูฺฏุฑ ุงูฺฉู TTL ุฌุฏุงฺฏูููโุง ูุดุฎุต ฺฉูุฏ.
- ุจุฑุง ูุชุงุฏุชุง ูุงูโูุง ูููุช ุง ูุงฺฏโูุง ุฎู ููุงุณุจู.

#### โ ูุซุงู ด: ุจุฑุฑุณ ุฒูุงู ุจุงูโูุงูุฏู TTL

ุฒูุงู ุจุงูโูุงูุฏู TTL ู ุณุชูู ุฎุงุต ุฑู ฺฺฉ ูโฺฉูู.

```sql
SELECT TTL(code)
FROM login_codes
WHERE phone = '09123456789';
```

**ุฎุฑูุฌ ููุฑุฏ ุงูุชุธุงุฑ**:
- ุงฺฏู ฑฐฐ ุซุงูู ุจุงู ูููุฏู ุจุงุดูุ ุฎุฑูุฌ `100` ุฎูุงูุฏ ุจูุฏ.

#### โ ูุซุงู ต: TTL ุฑู ุณุชููโูุง ุฎุงุต

ู ุฑุฏู ูุงุฑุฏ ูโฺฉูู ฺฉู ููุท ุจุนุถ ุณุชููโูุง TTL ุฏุงุดุชู ุจุงุดู.

```sql
CREATE TABLE users (
    id UUID PRIMARY KEY,
    name TEXT,
    email TEXT
);

INSERT INTO users (id, name, email)
VALUES (uuid(), 'Alireza', 'ali@example.com')
USING TTL 300;
```

**ฺ ุฏุงุฑู ุงุชูุงู ูโุงูุชูุ**
- ูุฑ ุฏู ุณุชูู `name` ู `email` ู TTL ุจู ูุฏุช ณฐฐ ุซุงูู ูโฺฏุฑู.
- ุญุงูุง ููุท ุณุชูู `email` ุฑู ุขูพุฏุช ูโฺฉูู:

```sql
UPDATE users
USING TTL 600
SET email = 'kos@gmail.com'
WHERE id = <your-uuid>;
```

**ูุชุฌู**:
- ุณุชูู `email` ุญุงูุง TTL ถฐฐ ุซุงูู ุฏุงุฑู.
- ุณุชูู `name` TTL ุงุตู ุฎูุฏุด (ณฐฐ ุซุงูู) ุฑู ูฺฏู ูโุฏุงุฑู.

### ๐ง ูฺฉุชู ฺฉูุฏ: TTL ุฏุฑ ุณุทุญ ุณุชููู

- TTL ุฏุฑ ฺฉุงุณุงูุฏุฑุง ุฏุฑ **ุณุทุญ ุณุชูู (ุณููู)** ุงุนูุงู ูโุดูุ ูู ฺฉู ุณุทุฑ.
- ููุท ุณุชููโูุง ฺฉู ุชู ุฏุณุชูุฑ `INSERT` ุง `UPDATE` ููุฏุงุฑุฏู ูโุดูุ TTL ุฑู ูโฺฏุฑู.
- ุงฺฏู ูโุฎูุง ฺฉู ุณุทุฑ ูููุถ ุจุดูุ ุจุงุฏ ููู ุณุชููโูุง ุบุฑฺฉูุฏ ุฑู ุชู ุฏุณุชูุฑ ุจุง TTL ููุฏุงุฑุฏู ฺฉู.

### โ๏ธ ุจูุชุฑู ุฑูุดโูุง ู ูุญุฏูุฏุชโูุง

- **ุงุณุชูุงุฏู ุงุฒ TTL ุจุฑุง ุฏุงุฏูโูุง ูููุช**: ุจุฑุง ุฏุงุฏูโูุง ุฏุงุฆู ุงุฒ TTL ุงุณุชูุงุฏู ูฺฉูุฏ.
- **ุงุฌุชูุงุจ ุงุฒ TTL ุฎู ฺฉูุชุงู**: TTLูุง ุฎู ฺฉูุชุงู (ูุซู ฺฉูุชุฑ ุงุฒ ฑฐ ุซุงูู) ูโุชููู ุชุนุฏุงุฏ ุฒุงุฏ tombstone ุงุฌุงุฏ ฺฉูู ู ฺฉุงุฑุง ุฑู ฺฉุงูุด ุจุฏู.
- **ูุธุงุฑุช ุจุฑ tombstoneูุง**: ุฏุงุฏูโูุง ูููุถโุดุฏู ุจู tombstone ุชุจุฏู ูโุดู ฺฉู ุท ูุดุฑุฏูโุณุงุฒ ูพุงฺฉ ูโุดู. ุชูุธูุงุช ูุดุฑุฏูโุณุงุฒ ุฑู ุฏุฑุณุช ฺฉูุฏ.
- **TTL ูพุดโูุฑุถ**: ุจุฑุง ุฌุฏููโูุง ุจุง ูุงุฒูุง ุงููุถุง ูุดุฎุตุ ุงุฒ `default_time_to_live` ุงุณุชูุงุฏู ฺฉูุฏ.

---

## ๐ ุจุฎุด ุฏูู: ุงูุฏฺฉุณโูุง ุซุงููู โ ูพุฑุณโูุฌู ุฑู ุณุชููโูุง ุบุฑฺฉูุฏ

### โ ุงูุฏฺฉุณ ุซุงููู ฺูุ

ุชู ฺฉุงุณุงูุฏุฑุงุ ูพุฑุณโูุฌููุง ูุนูููุงู ููุท ุฑู **ฺฉูุฏ ุงุตู** ุง **ฺฉูุฏ ูพุงุฑุชุดู** ูุงุจู ุงุฌุฑุง ูุณุชู ุชุง ฺฉุงุฑุง ุจุงูุง ุจูููู. **ุงูุฏฺฉุณ ุซุงููู** ุจู ุดูุง ุงูฺฉุงู ูโุฏู ุฑู ุณุชููโูุง ุบุฑฺฉูุฏ ูู ูพุฑุณโูุฌู ฺฉูุฏุ ูู ู ุณุฑ ููุงุญุธุงุช ุฏุงุฑู.

### ๐ฏ ฺุฑุง ุงุฒ ุงูุฏฺฉุณโูุง ุซุงููู ุงุณุชูุงุฏู ฺฉููุ

- **ุงูุนุทุงูโูพุฐุฑ ุฏุฑ ูพุฑุณโูุฌู**: ูโุชููุฏ ุฑู ุณุชููโูุง ูุซู ุดูุฑ ุง ุงูู ููุชุฑ ฺฉูุฏ.
- **ููุงุฑุฏ ุงุณุชูุงุฏู**: ููุชุฑ ฺฉุฑุฏู ฺฉุงุฑุจุฑุงู ุจุฑ ุงุณุงุณ ุดูุฑุ ุงูู ุง ูฺฺฏโูุง ุฏฺฏู.

### โ๏ธ ูุดุฏุงุฑ

- ุงูุฏฺฉุณโูุง ุซุงููู ุจุฑุง ุณุชููโูุง ุจุง **ฺฉุงุฑุฏูุงูุช ุจุงูุง** (ูุซู `email` ฺฉู ููุงุฏุฑ ููุญุตุฑุจูโูุฑุฏ ุฒุงุฏ ุฏุงุฑู) ุง ุฏุชุงุจุณโูุง ุฎู ุจุฒุฑฺฏ ููุงุณุจ ูุณุชู.
- ูโุชููู ุชู ูุญุทโูุง ุชูุฒุนโุดุฏู ุจุงุนุซ ฺฉุงูุด ฺฉุงุฑุง ุจุดู ฺูู ูุงุฒ ุจู ุงุณฺฉู ฺูุฏ ฺฏุฑู ุฏุงุฑู.

### ๐๏ธ ูุซุงูโูุง ุนูู

ุจุงุฏ ู ุฌุฏูู `users` ุจุณุงุฒู ู ุงูุฏฺฉุณ ุซุงููู ุฑูุด ุงุนูุงู ฺฉูู.

#### ๐ฆ ุชุนุฑู ุฌุฏูู

```sql
CREATE TABLE users (
    id UUID PRIMARY KEY,
    name TEXT,
    email TEXT,
    city TEXT
);
```

#### โ ูุซุงู ฑ: ุณุงุฎุช ุงูุฏฺฉุณ ุซุงููู

ู ุงูุฏฺฉุณ ุฑู ุณุชูู `city` ูโุณุงุฒู ุชุง ุจุชููู ุจุฑ ุงุณุงุณ ุดูุฑ ูพุฑุณโูุฌู ฺฉูู.

```sql
CREATE INDEX ON users (city);
```

#### โ ูุซุงู ฒ: ูพุฑุณโูุฌู ุจุง ุงูุฏฺฉุณ ุซุงููู

ุญุงูุง ูโุชููุฏ ุจุฑ ุงุณุงุณ `city` ูพุฑุณโูุฌู ฺฉูุฏุ ุจุฏูู ุงูฺฉู ุฌุฒู ฺฉูุฏ ุงุตู ุจุงุดู.

```sql
SELECT * FROM users WHERE city = 'Tehran';
```

**ฺ ุฏุงุฑู ุงุชูุงู ูโุงูุชูุ**
- ุงูุฏฺฉุณ ุซุงููู ุงู ูพุฑุณโูุฌู ุฑู ููฺฉู ูโฺฉููุ ูฺฏุฑูู ุฎุทุง ูโุฏุงุฏ.
- ุจุฏูู ุงูุฏฺฉุณุ ุฎุทุง ุฒุฑ ุฑู ูโฺฏุฑุฏ: `InvalidQueryException: Cannot execute this query as it might involve data from multiple partitions`.

#### โ ูุซุงู ณ: ูพุฑุณโูุฌู ุจุฏูู ุงูุฏฺฉุณ (ููุฑุฏ ุฎุทุง)

ุงฺฏู ุจุฎูุงุฏ ุจุฏูู ุงูุฏฺฉุณ ุฑู `city` ูพุฑุณโูุฌู ฺฉูุฏ:

```sql
SELECT * FROM users WHERE city = 'Tehran';
```

**ุฎุฑูุฌ ููุฑุฏ ุงูุชุธุงุฑ**:
- ุฎุทุง: `InvalidQueryException: No secondary index found for column city`.

#### โ ูุซุงู ด: ุญุฐู ุงูุฏฺฉุณ ุซุงููู

ุงฺฏู ุฏฺฏู ุจู ุงูุฏฺฉุณ ูุงุฒ ูุฏุงุฑุฏ:

```sql
DROP INDEX users_city_idx;
```

### ๐ง ุจูุชุฑู ุฑูุดโูุง ุจุฑุง ุงูุฏฺฉุณโูุง ุซุงููู

- **ุงุณุชูุงุฏู ูุญุฏูุฏ**: ุจุฑุง ฺฉุงุฑุง ุจูุชุฑุ ุงุฒ ูพุฑุณโูุฌููุง ูุจุชู ุจุฑ ฺฉูุฏ ูพุงุฑุชุดู ุงุณุชูุงุฏู ฺฉูุฏ.
- **ฺฉุงุฑุฏูุงูุช ูพุงู**: ุงูุฏฺฉุณโูุง ุซุงููู ุฑู ุจุฑุง ุณุชููโูุง ุจุง ููุงุฏุฑ ููุญุตุฑุจูโูุฑุฏ ฺฉู (ูุซู `city`) ุงุณุชูุงุฏู ฺฉูุฏุ ูู `email`.
- **ุฌุงฺฏุฒูโูุง**: ุจุฑุง ูพุฑุณโูุฌููุง ูพฺุฏู ุชู ุฏุชุงุจุณโูุง ุจุฒุฑฺฏุ ุงุฒ **ููุงุดโูุง ูุงุฏ (Materialized Views)** ุง ุฌุฏููโูุง ุบุฑูุฑูุงูโุดุฏู ุงุณุชูุงุฏู ฺฉูุฏ.
- **ูุธุงุฑุช ุจุฑ ฺฉุงุฑุง**: ุงูุฏฺฉุณโูุง ุซุงููู ูโุชููู ุฑู ุณุฑุนุช ููุดุชู ู ุฎููุฏู ุชู ุฎูุดูโูุง ุจุฒุฑฺฏ ุชุฃุซุฑ ููู ุจุฐุงุฑู.

---

## ๐ ุจุฎุด ุณูู: ุชูุงุจุน ุฏุงุฎู ุฏุฑ CQL

### โ ุชูุงุจุน ุฏุงุฎู ฺโุงูุ

ฺฉุงุณุงูุฏุฑุง ู ุณุฑ ุชูุงุจุน ุฏุงุฎู ุชู CQL ุฏุงุฑู ฺฉู ุจุฑุง ุฏุณุชฺฉุงุฑ ุฏุงุฏูโูุงุ ฺฏุฑูุชู ูุชุงุฏุชุง ุง ุงูุฌุงู ูุญุงุณุจุงุช ุงุณุชูุงุฏู ูโุดู. ุงู ุชูุงุจุน ุจุฑุง ูพุฑุณโูุฌููุง ูพูุง ู ุฏุจุงฺฏ ฺฉุฑุฏู ุฎู ฺฉุงุฑุจุฑุฏู.

### ๐ ุชูุงุจุน ุฏุงุฎู ุฑุงุฌ

| ุชุงุจุน                | ุชูุถุญ                                              | ูุซุงู                                      |
|---------------------|--------------------------------------------------|------------------------------------------|
| `TTL(column)`       | ุฒูุงู ุจุงูโูุงูุฏู TTL ู ุณุชูู (ุจู ุซุงูู) ุฑู ุจุฑูโฺฏุฑุฏููู | `SELECT TTL(code) FROM login_codes`      |
| `WRITETIME(column)` | ุฒูุงู ุซุจุช ุง ุขูพุฏุช ู ุณุชูู ุฑู ุจุฑูโฺฏุฑุฏููู         | `SELECT WRITETIME(name) FROM users`      |
| `now()`             | ู UUID ูุจุชู ุจุฑ ุฒูุงู ุชููุฏ ูโฺฉูู                | `INSERT INTO users (id) VALUES (now())`  |
| `toTimestamp(uuid)` | ู UUID ุฑู ุจู timestamp ุชุจุฏู ูโฺฉูู              | `SELECT toTimestamp(now())`              |
| `count(*)`          | ุชุนุฏุงุฏ ุฑุฏูโูุง ูุชุฌู ู ูพุฑุณโูุฌู ุฑู ูโุดูุงุฑู      | `SELECT count(*) FROM users`             |
| `dateOf(uuid)`      | ุชุงุฑุฎ ุฑู ุงุฒ ู UUID ูุจุชู ุจุฑ ุฒูุงู ุงุณุชุฎุฑุงุฌ ูโฺฉูู  | `SELECT dateOf(id) FROM users`           |

### ๐๏ธ ูุซุงูโูุง ุนูู

#### โ ูุซุงู ฑ: ุจุฑุฑุณ ุฒูุงู ุซุจุช

ุฒูุงู ุขุฎุฑู ุขูพุฏุช ุณุชูู `email` ู ฺฉุงุฑุจุฑ ุฑู ฺฺฉ ูโฺฉูู.

```sql
SELECT WRITETIME(email)
FROM users
WHERE id = <your-uuid>;
```

**ุฎุฑูุฌ ููุฑุฏ ุงูุชุธุงุฑ**:
- ู timestamp ูุซู `2025-08-03 13:01:23.123+0000`.

#### โ ูุซุงู ฒ: ุดูุงุฑุด ุฑุฏูโูุง

ุชุนุฏุงุฏ ฺฉู ฺฉุงุฑุจุฑุงู ุฑู ูโุดูุฑู.

```sql
SELECT count(*)
FROM users;
```

**ุฎุฑูุฌ ููุฑุฏ ุงูุชุธุงุฑ**:
- ู ุนุฏุฏุ ูุซูุงู `42`.

#### โ ูุซุงู ณ: ุชููุฏ UUID ุจุง `now()`

ู ฺฉุงุฑุจุฑ ุฌุฏุฏ ุจุง UUID ูุจุชู ุจุฑ ุฒูุงู ูุงุฑุฏ ูโฺฉูู.

```sql
INSERT INTO users (id, name)
VALUES (now(), 'Ali');
```

**ฺ ุฏุงุฑู ุงุชูุงู ูโุงูุชูุ**
- ุชุงุจุน `now()` ู UUID ููุญุตุฑุจูโูุฑุฏ ุจุฑ ุงุณุงุณ ุฒูุงู ูุนู ุชููุฏ ูโฺฉูู.

#### โ ูุซุงู ด: ุงุณุชุฎุฑุงุฌ ุชุงุฑุฎ ุงุฒ UUID

ุชุงุฑุฎ ุฑู ุงุฒ ู UUID ูุจุชู ุจุฑ ุฒูุงู ูโฺฏุฑู.

```sql
SELECT dateOf(id)
FROM users
WHERE id = <your-uuid>;
```

**ุฎุฑูุฌ ููุฑุฏ ุงูุชุธุงุฑ**:
- ู ุชุงุฑุฎ ูุซู `2025-08-03`.

### ๐ง ุจูุชุฑู ุฑูุดโูุง ุจุฑุง ุชูุงุจุน ุฏุงุฎู

- **ุงุณุชูุงุฏู ุจุฑุง ูุชุงุฏุชุง**: ุชูุงุจุน ูุซู `TTL()` ู `WRITETIME()` ุจุฑุง ุฏุจุงฺฏ ุง ููุฒ ุนุงูโุงู.
- **ุชุฑฺฉุจ ุจุง ูพุฑุณโูุฌููุง**: ุงุฒ `count(*)` ุง `now()` ุชู ููุทู ุจุฑูุงูู ุจุฑุง ุนููุงุช ูพูุง ุงุณุชูุงุฏู ฺฉูุฏ.
- **ุงุฌุชูุงุจ ุงุฒ ุงุณุชูุงุฏู ุจุดโุงุฒุญุฏ**: ุชูุงุจุน ูุซู `count(*)` ุชู ุฌุฏููโูุง ุจุฒุฑฺฏ ูโุชููู ฺฉูุฏ ุจุงุดู ุงฺฏู ูพุงุฑุชุดูโุจูุฏ ุฏุฑุณุช ูุจุงุดู.

---

## ๐งช ุชูุฑู: ุฏุงูุด ุฎูุฏุชูู ุฑู ุชุณุช ฺฉูุฏ

ุจุงุฏ ุจุง ู ุชูุฑู ุนูู ุฏุงูุดโุชูู ุฑู ูุญฺฉ ุจุฒูุฏ.

### ๐ ูุธูู: ุณุงุฎุช ุฌุฏูู ุงุนูุงูโูุง ุจุง TTL

ู ุฌุฏูู ุจู ุงุณู `notifications` ุจุณุงุฒุฏ ฺฉู ูพุงูโูุง ูููุช ุฑู ุฐุฎุฑู ฺฉูู ู ุจุนุฏ ุงุฒ ฑ ุณุงุนุช (ณถฐฐ ุซุงูู) ูููุถ ุจุดู. ุจุนุฏ ู ุงุนูุงู ููููู ูุงุฑุฏ ฺฉูุฏ.

#### ๐ฆ ุชุนุฑู ุฌุฏูู

```sql
CREATE TABLE notifications (
    id UUID PRIMARY KEY,
    user_id UUID,
    message TEXT
);
```

#### โ ูุธูู ุดูุง

ู ูพุฑุณโูุฌู CQL ุจููุณุฏ ฺฉู ู ุงุนูุงู ุฑู ูุงุฑุฏ ฺฉูู ู ุจุนุฏ ุงุฒ ฑ ุณุงุนุช ูููุถ ุจุดู.

**ุฌูุงุจ ุดูุง**:

```sql
INSERT INTO notifications (id, user_id, message)
VALUES (now(), uuid(), 'ุณูุงุฑุดุชูู ุงุฑุณุงู ุดุฏ!')
USING TTL 3600;
```

**ฺ ุฏุงุฑู ุงุชูุงู ูโุงูุชูุ**
- ุชุงุจุน `now()` ู UUID ูุจุชู ุจุฑ ุฒูุงู ุจุฑุง `id` ุชููุฏ ูโฺฉูู.
- ุชุงุจุน `uuid()` ู UUID ุชุตุงุฏู ุจุฑุง `user_id` ุชููุฏ ูโฺฉูู.
- ุณุชูู `message` ุจุนุฏ ุงุฒ ณถฐฐ ุซุงูู (ฑ ุณุงุนุช) ูููุถ ูโุดู.

#### โ ูุธูู ุงุถุงู

ุฒูุงู ุจุงูโูุงูุฏู TTL ุณุชูู `message` ุงุนูุงู ฺฉู ูุงุฑุฏ ฺฉุฑุฏุฏ ุฑู ฺฺฉ ฺฉูุฏ.

**ุฌูุงุจ ุดูุง**:

```sql
SELECT TTL(message)
FROM notifications
WHERE id = <your-uuid>;
```

---

## ๐ง ุชูุฑูโูุง ุงุถุงู

ฑ. **ฺุงูุด TTL**: ู ุฌุฏูู ุจุฑุง ุฌูุณุงุช ฺฉุงุฑุจุฑ ูููุช ุจุง TTL ูพุดโูุฑุถ ณฐ ุฏููู ุจุณุงุฒุฏ. ู ุฌูุณู ูุงุฑุฏ ฺฉูุฏ ู TTLุด ุฑู ุจุฑุฑุณ ฺฉูุฏ.
ฒ. **ฺุงูุด ุงูุฏฺฉุณ ุซุงููู**: ู ุงูุฏฺฉุณ ุซุงููู ุฑู ุณุชูู `user_id` ุฌุฏูู `notifications` ุงุถุงูู ฺฉูุฏ. ู ูพุฑุณโูุฌู ุจููุณุฏ ฺฉู ููู ุงุนูุงูโูุง ู `user_id` ุฎุงุต ุฑู ูพุฏุง ฺฉูู.
ณ. **ฺุงูุด ุชูุงุจุน**: ู ูพุฑุณโูุฌู ุจููุณุฏ ฺฉู ูู `WRITETIME` ู ูู `dateOf` ุณุชูู `message` ุชู ุฌุฏูู `notifications` ุฑู ุจุฑฺฏุฑุฏููู.

---

## โ๏ธ ูุดฺฉูุงุช ุฑุงุฌ ู ุจูุชุฑู ุฑูุดโูุง

- **TTL**:
  - ุจุฑุง ุฏุงุฏูโูุง ุฏุงุฆู ุงุฒ TTL ุงุณุชูุงุฏู ูฺฉูุฏุ ุจุฑุง ุฏุงุฏูโูุง ูููุช ููุงุณุจู.
  - ุงุฒ TTLูุง ุฎู ฺฉูุชุงู (ูุซู ฺฉูุชุฑ ุงุฒ ฑฐ ุซุงูู) ูพุฑูุฒ ฺฉูุฏ ฺูู tombstoneูุง ุฒุงุฏ ุชููุฏ ูโฺฉูู.
- **ุงูุฏฺฉุณโูุง ุซุงููู**:
  - ุฑู ุณุชููโูุง ุจุง ฺฉุงุฑุฏูุงูุช ุจุงูุง (ูุซู `email` ุง `timestamp`) ุงุณุชูุงุฏู ูฺฉูุฏ.
  - ุจุฑุง ูพุฑุณโูุฌููุง ูพฺุฏู ุชู ุฏุชุงุจุณโูุง ุจุฒุฑฺฏุ ุงุฒ ููุงุดโูุง ูุงุฏ ุง ุฌุฏููโูุง ุบุฑูุฑูุงูโุดุฏู ุงุณุชูุงุฏู ฺฉูุฏ.
- **ุชูุงุจุน ุฏุงุฎู**:
  - ุงุฒ `count(*)` ุชู ุฌุฏููโูุง ุจุฒุฑฺฏ ุจุง ุงุญุชุงุท ุงุณุชูุงุฏู ฺฉูุฏ ุชุง ฺฉุงุฑุง ฺฉุงูุด ูพุฏุง ูฺฉูู.
  - ุงุฒ `now()` ู `toTimestamp()` ุจุฑุง ุนููุงุช ูุจุชู ุจุฑ ุฒูุงู ุงุณุชูุงุฏู ฺฉูุฏ.

---

## ๐ ูุฏู ุจุนุฏ ฺูุ

ูุฑุฏุง ุจู **ููุงุดโูุง ูุงุฏ (Materialized Views)** ู **ุนููุงุช ุฏุณุชูโุง (Batch Operations)** ูโูพุฑุฏุงุฒู ุชุง ููุงุฑุชโูุง ูุฏูโุณุงุฒ ุฏุงุฏู ู ูพุฑุณโูุฌู ุดูุง ุฑู ุจู ุณุทุญ ุจุนุฏ ุจุจุฑู! ุจุฑุง ูุซุงูโูุง ุนูู ู ุชูุฑูโูุง ุจุดุชุฑ ููุฑุงู ุจุงุดุฏ. ๐

ุงฺฏู ุณูุงู ุฏุงุฑุฏ ุง ูุซุงูโูุง ุจุดุชุฑ ูโุฎูุงุฏุ ุจูู ุจฺฏุฏ ุชุง ูุญุชูุง ุฑู ุจุฑุงุชูู ุดุฎุตโุณุงุฒ ฺฉูู! ๐ฌ