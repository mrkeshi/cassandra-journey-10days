# ๐ ุดุฑูุน ฺฉุงุฑ ุจุง ุขูพุงฺ ฺฉุงุณุงูุฏุฑุง โ ูุจุงู ู ูุนูุงุฑ

ุฎูุด ุขูุฏุฏ! ุงู ุฑุงูููุง ููุฏูุงุช ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ ุชุง ุจุง **ุขูพุงฺ ฺฉุงุณุงูุฏุฑุง** ุขุดูุง ุดูุฏ โ ฺฉ ุฏุชุงุจุณ NoSQL ุชูุฒุนโุดุฏู ู ูุฏุฑุชููุฏ ฺฉู ุจุฑุง ูุฏุฑุช ุญุฌู ุจุณุงุฑ ุฒุงุฏ ุงุฒ ุฏุงุฏูโูุง ุจุง ูุงุจูุช ุฏุณุชุฑุณ ุจุงูุง ู ููุงุณโูพุฐุฑ ุทุฑุงุญ ุดุฏู ุงุณุช.

ุงฺฏุฑ ุชุง ุจู ุญุงู ุชุนุฌุจ ฺฉุฑุฏูโุงุฏ ฺฉู ูพูุชูุฑูโูุง ูุซู **Netflix**ุ **Reddit** ุง **Instagram** ฺุทูุฑ ุฏุงุฏูโูุง ุนุธูโุดุงู ุฑุง ุจุฏูู ูุทุน ูุฏุฑุช ูโฺฉููุฏุ ฺฉุงุณุงูุฏุฑุง ฺฉ ุงุฒ ูพุงุณุฎโูุงุณุช.

---

## ๐ฏ ูุฏู

ูุฏู ุณุงุฎุช ฺฉ ุณุณุชู **ุชูุฒุนโุดุฏู ู ููุงุณโูพุฐุฑ** ุงุณุช ฺฉู ุจุชูุงูุฏ ุญุฌู ุนุธู ุงุฒ ุฏุงุฏูโูุง ุณุงุฎุชุงุฑููุฏ ุฑุง ุฐุฎุฑู ฺฉูุฏ. ูุฑ ุฑุฏู ุจุง ฺฉ ฺฉูุฏ ฺฉุชุง ุงูุฏฺฉุณ ูโุดูุฏ ู ูุฑ ุฑุฏู ูโุชูุงูุฏ **ุชุนุฏุงุฏ ูุงูุญุฏูุฏ ุณุชูู** ุฏุงุดุชู ุจุงุดุฏ.

---

## ๐ง ุขูพุงฺ ฺฉุงุณุงูุฏุฑุง ฺุณุชุ

**ุขูพุงฺ ฺฉุงุณุงูุฏุฑุง** ฺฉ ุฏุชุงุจุณ NoSQL ูุชูโุจุงุฒ ุงุณุช ฺฉู ุจุฑุง ฺฉุงุฑุง ู ุงุทููุงู ุจุงูุง ุทุฑุงุญ ุดุฏู ุงุณุช. ุงุจุชุฏุง ุฏุฑ **ุณุงู ฒฐฐท ุฏุฑ ูุณุจูฺฉ** ุจุฑุง ุฌุณุชุฌู ุตูุฏูู ูุฑูุฏ ุณุงุฎุชู ุดุฏ ู ุณูพุณ ุจู ูพุฑูฺูโุง ุฏุฑ ุจูุงุฏ ุขูพุงฺ ุชุจุฏู ุดุฏ.

ฺฉุงุณุงูุฏุฑุง ุชุฑฺฉุจ ุงุฒ ุจูุชุฑู ุงุฏูโูุงุณุช ุงุฒ:

- **Amazon Dynamo** (ุจุฑุง ุฐุฎุฑู ฺฉูุฏ-ููุฏุงุฑ ุชูุฒุนโุดุฏู)  
- **Google BigTable** (ุจุฑุง ูุฏู ุฏุงุฏู ุณุชูู)

### ๐๏ธ ุจู ุฒุจุงู ุณุงุฏู:

ฺฉุงุณุงูุฏุฑุง ูุงููุฏ ฺฉ ุตูุญู ฺฏุณุชุฑุฏู ุนุธู ู ุบุฑูุชูุฑฺฉุฒ ุงุณุช ฺฉู:

- ูุฑ ุฑุฏู ฺฉูุฏ ฺฉุชุง ุฏุงุฑุฏ  
- ูุฑ ุฑุฏู ูโุชูุงูุฏ ุณุชููโูุง ูุชูุงูุช ุฏุงุดุชู ุจุงุดุฏ  
- ุฏุงุฏูโูุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฑู ฺูุฏู ูุงุดู ุชูุฒุน ูโุดููุฏ  
- ูฺ ููุทู ุดฺฉุณุช ูุงุญุฏ ูุฌูุฏ ูุฏุงุฑุฏ

---

## โ๏ธ ฺฉุงุณุงูุฏุฑุง ฺฺฏููู ฺฉุงุฑ ูโฺฉูุฏุ

- **ุบุฑูุชูุฑฺฉุฒ**: ุชูุงู ููุฏูุง ุจุฑุงุจุฑูุฏุ ููุฏ ุงุตู ุง ุฑูุจุฑ ูุฌูุฏ ูุฏุงุฑุฏ.  
- **ูุงุจู ููุงุณ**: ุจุง ุงูุฒูุฏู ููุฏูุง ุจุดุชุฑุ ุนููฺฉุฑุฏ ุจูุชุฑ ูโุดูุฏ.  
- **ุฏุณุชุฑุณโูพุฐุฑ**: ุณุณุชู ุญุช ุงฺฏุฑ ุจุนุถ ููุฏูุง ุฎุฑุงุจ ุดููุฏ ุจุงุฒ ฺฉุงุฑ ูโฺฉูุฏ.  
- **ุณุงุฒฺฏุงุฑ ูุงุจู ุชูุธู**: ูโุชูุงูุฏ ุจู ุณุงุฒฺฏุงุฑ ุณุฑุน ุงูุง ูู ฺูุฏุงู ูู ู ุณุงุฒฺฏุงุฑ ฺฉูุฏุชุฑ ุงูุง ูุทูุฆูโุชุฑ ุงูุชุฎุงุจ ฺฉูุฏ.

> ฺฉุงุณุงูุฏุฑุง ุทุจู [ูุธุฑู CAP](https://fa.wikipedia.org/wiki/%D9%86%D8%B8%D8%B1%DB%8C%D9%87_CAP) ฺฉ ุณุณุชู **AP** (ุฏุณุชุฑุณโูพุฐุฑ ู ููุงูู ุฏุฑ ุจุฑุงุจุฑ ูุทุน ุดุจฺฉู) ุงุณุช.

---

## ๐งฐ ุงุตุทูุงุญุงุช ุฑุงุฌ ฺฉุงุณุงูุฏุฑุง

| ุงุตุทูุงุญ       | ูุนู                                                       |
|--------------|------------------------------------------------------------|
| **ููุฏ (Node)**      | ฺฉ ูุงุดู (ูุฒฺฉุ ุงุจุฑ ุง ุฏุงฺฉุฑ) ฺฉู ฺฉุงุณุงูุฏุฑุง ุฑู ุขู ุงุฌุฑุง ูโุดูุฏ |
| **ฺฉูุงุณุชุฑ (Cluster)** | ฺฏุฑูู ุงุฒ ููุฏูุง ฺฉุงุณุงูุฏุฑุง ฺฉู ุจู ูู ูุชุตูโุงูุฏ               |
| **ฺฉโุงุณูพุณ (Keyspace)** | ูุงููุฏ ฺฉ ุฏุชุงุจุณ ฺฉู ฺูุฏู ุฌุฏูู ุฑุง ุฏุฑ ุจุฑ ูโฺฏุฑุฏ           |
| **ุฌุฏูู (Table)**    | ูุงููุฏ ุฌุฏูู ุฏุฑ SQLุ ุดุงูู ุฑุฏูโูุง                             |
| **ุฑุฏู (Row)**      | ุดูุงุณุง ุดุฏู ุชูุณุท ฺฉูุฏ ุงุตูุ ุดุงูู ุณุชููโูุง ูุชุนุฏุฏ           |
| **ุณุชูู (Column)**   | ฺฉ ููุฏุงุฑ ุฏุงุฏู ฺฉูุฏ-ููุฏุงุฑ                                   |

---

## ๐ฆ ููุงุฑุฏ ฺฉุงุฑุจุฑุฏ ฺฉุงุณุงูุฏุฑุง

ฺฉุงุณุงูุฏุฑุง ุฏุฑ ุจุฑูุงููโูุง ุชูุฒุนโุดุฏู ู ุณูฺฏู ููุดุชู ุจูุงุฏุฑูฺฏ ุนุงู ุงุณุช. ฺูุฏ ูุซุงู ูุงูุน:

- **Reddit/Digg**: ุฐุฎุฑู ุฏุงุฏู ฺฉุงุฑุจุฑุงู ุจุง ุฏุณุชุฑุณ ุจุงูุง  
- **ุงูุชุฑูุช ุงุดุงุก (IoT)**: ุฌูุนโุขูุฑ ู ุชุญูู ุฏุงุฏูโูุง ุญุณฺฏุฑ  
- **ูุงฺฏโุจุฑุฏุงุฑ**: ุฐุฎุฑู ุฏุงุฏูโูุง ุณุฑ ุฒูุงู ุจุฑุง ูุงูุชูุฑูฺฏ  
- **ุงูพูฺฉุดูโูุง ุงุฌุชูุงุน**: ูพุงูโุฑุณุงูุ ูุฏ ุฎุจุฑุ ููุชูุฑูุง ูพุดููุงุฏ

---

## ๐ ฺุฑุง ฺฉุงุณุงูุฏุฑุงุ

ูุฑุถ ฺฉูุฏ ุณุณุชู ูโุณุงุฒุฏ ฺฉู:

- ุจุงุฏ ููุงุฑุฏูุง ุฏุงุฏู ุญุณฺฏุฑ ุฏุฑ ุฑูุฒ ุฐุฎุฑู ฺฉูุฏ  
- ูุทุน ุบุฑูุงุจู ูุจูู ุงุณุช  
- ููุดุชู ุณุฑุน ุฏุงุฏู ุงููุช ุฏุงุฑุฏ  
- ููุดู ุจู ุณุงุฒฺฏุงุฑ ูู ูุงุฒ ูุฏุงุฑุฏ

ฺฉุงุณุงูุฏุฑุง ุงูุชุฎุงุจ ููุงุณุจ ุงุณุช.

---

## ๐งฑ ููุง ฺฉู ูุนูุงุฑ

- ุฏุงุฏู ุจุง ุงุณุชูุงุฏู ุงุฒ ูุด ุชูุฒุน ุดุฏู ุจู ููุฏูุง ุชูุณู ูโุดูุฏ  
- ูฺ ููุงููฺฏโฺฉููุฏู ูุฑฺฉุฒ ูุฌูุฏ ูุฏุงุฑุฏุ ูุฑ ููุฏ ูโุชูุงูุฏ ุนููุงุช ุฎูุงูุฏู/ููุดุชู ุฑุง ุงูุฌุงู ุฏูุฏ  
- ุฏุงุฏูโูุง ุชฺฉุซุฑ ูโุดููุฏ ุชุง ุงูู ู ุฏุณุชุฑุณโูพุฐุฑ ุชุถูู ุดูุฏ

ุฌุฒุฆุงุช ุจุดุชุฑ ูุซู **ููโุชุจูโูุงุ SSTableูุงุ ฺฉููพฺฉุดู** ู **hinted handoff** ุฏุฑ ุฏุฑุณโูุง ุจุนุฏ ุจุฑุฑุณ ุฎูุงูุฏ ุดุฏ.

---

## โ๏ธ ูุดุฏุงุฑ

ูุทุงูุจ ุขููุฒุด ู ฺฉู ูุณุชูุฏ ู ุจู ูุณุฎู ุฎุงุต ุงุฒ ฺฉุงุณุงูุฏุฑุง ูุงุจุณุชู ูุณุชูุฏ. ูุฏู ุฏุฑฺฉ ฺฉู ูุญูู ฺฉุงุฑ ฺฉุงุณุงูุฏุฑุง ุงุณุช.

---

## ๐ง ูฺฉุชู

ุงฺฏุฑ ุจุง ุณุณุชูโูุง ุชูุฒุนโุดุฏู ุขุดูุง ูุฏุงุฑุฏุ ฺฉุงุณุงูุฏุฑุง ุฑุง ุจู ฺฉ **ฺฉุชุงุจุฎุงูู ููุดููุฏ** ุชุดุจู ฺฉูุฏ:

- ฺฉุชุงุจโูุง (ุฏุงุฏูโูุง) ุฏุฑ ุดุนุจ ูุฎุชูู (ููุฏูุง) ูฺฏูุฏุงุฑ ูโุดููุฏ  
- ูุฑ ุดุนุจู ูโุชูุงูุฏ ุฎุฏูุงุช ุฏูุฏ  
- ุงฺฏุฑ ฺฉ ุดุนุจู ุจุณุชู ุจุงุดุฏุ ุจูู ุจู ุดูุง ฺฉูฺฉ ูโฺฉููุฏ  
- ฺฉุชุงุจโูุง ุฏุฑ ุดุนุจ ูุฎุชูู ฺฉูพ ูโุดููุฏ ุชุง ุงูู ุจูุงููุฏ

---

## ๐๏ธ ฺฉูุฏ ุงุตู (Primary Key)

ฺฉูุฏ ุงุตู ูุฑ ุฑุฏู ุฑุง ฺฉุชุง ูโฺฉูุฏ ู ุฏู ุจุฎุด ุฏุงุฑุฏ:

- **ฺฉูุฏ ูพุงุฑุชุดู (Partition Key):** ูุดุฎุต ูโฺฉูุฏ ุฏุงุฏู ุฑู ฺฉุฏุงู ููุฏ ุฐุฎุฑู ุดูุฏ  
- **ฺฉูุฏ ุฎูุดูโุง (Clustering Key):** ุชุฑุชุจ ุฏุงุฏูโูุง ุฏุงุฎู ููุฏ ุฑุง ุชุนู ูโฺฉูุฏ

**ูุซุงู:**

``` PRIMARY KEY (city_id, employee_id) ```

city_id โ ฺฉูุฏ ูพุงุฑุชุดู

employee_id โ ฺฉูุฏ ุฎูุดูโุง

ููู ุฑุฏูโูุง ุจุง city_id ูุดุงุจู ุฑู ฺฉ ููุฏ ูุฑุงุฑ ูโฺฏุฑูุฏุ ุฏุงุฎู ุขู ููุฏ ุจุฑ ุงุณุงุณ employee_id ูุฑุชุจ ูโุดููุฏ.
# ๐ ุดุฑูุน ฺฉุงุฑ ุจุง Apache Cassandra โ ููุงูู ูพุดุฑูุชู

---

## ๐ ูพุงุฑุชุดูุฑ (Partitioner)

**ูพุงุฑุชุดูุฑ** ุชุตูู ูโฺฏุฑุฏ ุฏุงุฏูโูุง ฺฉุฌุง ุฐุฎุฑู ุดููุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุชุงุจุน ูุด.

- ูพุดโูุฑุถ: `Murmur3`  
- ุฎุฑูุฌ ูุด ุชุนู ูโฺฉูุฏ ุฏุงุฏู ุฑู ฺฉุฏุงู ูุณูุช ุงุฒ **ุญููู ูุด ุณุงุฒฺฏุงุฑ (Consistent Hash Ring)** ูุฑุงุฑ ูโฺฏุฑุฏ  
- ูพุณ ุงุฒ ุงูุชุฎุงุจ ูพุงุฑุชุดูุฑุ **ููโุชูุงู ุขู ุฑุง ุชุบุฑ ุฏุงุฏ**

### ูุซุงู:

```INSERT INTO employees (city_id, employee_id, name)  VALUES ('nyc', 101, 'Alice'); ```
'nyc' ุจุง Murmur3 ูุด ูโุดูุฏ

ุฎุฑูุฌ ูุด ุจู ููุฏ ฒ ุงุดุงุฑู ูโฺฉูุฏ โ ุฏุงุฏู ุจู ููุฏ ฒ ูโุฑูุฏ

# ุฑุงูููุง ฺฉุงุณุงูุฏุฑุง (Cassandra Guide)

---

## ๐ค ููุฏ ููุงููฺฏโฺฉููุฏู (Coordinator Node)

- ููุฏ ฺฉู ุฏุฑุฎูุงุณุช ฺฉูุงูุช ุฑุง ุฏุฑุงูุช ูโฺฉูุฏ.  
- ุฏุฑุฎูุงุณุชโูุง ุฑุง ุจู ููุฏูุง ุตุญุญ ุจุฑ ุงุณุงุณ ูุด ู ุชฺฉุฑุงุฑ ุงุฑุณุงู ูโฺฉูุฏ.  
- ูุฑ ููุฏ ูโุชูุงูุฏ ููุด **ููุงููฺฏโฺฉููุฏู** ุฑุง ุฏุงุดุชู ุจุงุดุฏ.

---

## ๐ฆ ุชฺฉุฑุงุฑ ุฏุงุฏู (Replication)

ฺฉุงุณุงูุฏุฑุง ุฏุงุฏูโูุง ุฑุง ุฑู ฺูุฏู ููุฏ ุชฺฉุฑุงุฑ ูโฺฉูุฏ.

### ๐ธ ุงุตุทูุงุญุงุช

- **ุนุงูู ุชฺฉุฑุงุฑ (Replication Factor - RF):** ุชุนุฏุงุฏ ูุณุฎูโูุง ูุฑ ุฑุฏู.  
- **ุงุณุชุฑุงุชฺ ุชฺฉุฑุงุฑ (Replication Strategy):** ูุญูู ุงูุชุฎุงุจ ููุฏูุง ูุณุฎูโูุง.

### โค ูุซุงู:

ุงฺฏุฑ `RF = 3` โ ุฏุงุฏู ุฑู ณ ููุฏ ูุฎุชูู ุฐุฎุฑู ูโุดูุฏ.

### ๐น ุงุณุชุฑุงุชฺ ุณุงุฏู (SimpleStrategy) โ ุฏุชุงุณูุชุฑ ุชฺฉ

- ูุณุฎู ุงูู ุฑู ููุฏ ูุด ุดุฏู  
- ูุณุฎูโูุง ุจุนุฏ ุฑู ฒ ููุฏ ุจุนุฏ ุจู ุตูุฑุช ุณุงุนุชฺฏุฑุฏ ุฑู ุญููู

### ๐น ุงุณุชุฑุงุชฺ ุชููพูููฺ ุดุจฺฉู (NetworkTopologyStrategy) โ ุฏุชุงุณูุชุฑูุง ฺูุฏฺฏุงูู

- ุชุนุฑู RFูุง ูุชูุงูุช ุจุฑุง ูุฑ ุฏุชุงุณูุชุฑ  
- ุฌููฺฏุฑ ุงุฒ ูุฑุงุฑ ฺฏุฑูุชู ูุณุฎูโูุง ุฑู ฺฉ **ุฑฺฉ** (rack)

---

## ุณุทูุญ ุณุงุฒฺฏุงุฑ (Consistency Levels)

**ุณุทุญ ุณุงุฒฺฏุงุฑ** = ุญุฏุงูู ุชุนุฏุงุฏ ููุฏูุง ฺฉู ุจุงุฏ ุจุฑุง ููููุชโุขูุฒ ุจูุฏู ุฎูุงูุฏู/ููุดุชู ูพุงุณุฎ ุฏููุฏ.

ฺฉุงุณุงูุฏุฑุง ุฏุงุฑุง **ุณุงุฒฺฏุงุฑ ูุงุจู ุชูุธู** ุงุณุช.

### ๐ธ ุณุทูุญ ุณุงุฒฺฏุงุฑ ููุดุชู

| ุณุทุญ          | ุชูุถุญ                                   |
|--------------|---------------------------------------|
| ONE, TWO, THREE | ฑุ ฒ ุง ณ ูุณุฎู ุจุงุฏ ุชุฃุฏ ฺฉููุฏ          |
| QUORUM       | ุงฺฉุซุฑุช (ูุซูุงู RF = 3 โ ฒ ููุฏ)           |
| ALL          | ููู ูุณุฎูโูุง ุจุงุฏ ูพุงุณุฎ ุฏููุฏ (ููโุชุฑู)    |
| ANY          | ฑ ููุฏ ุง hint ฺฉุงู ุงุณุช (ุถุนูโุชุฑู)       |
| LOCAL_QUORUM | ุงฺฉุซุฑุช ุฏุฑ ููุงู ุฏุชุงุณูุชุฑ                  |
| EACH_QUORUM  | ุงฺฉุซุฑุช ุฏุฑ ูุฑ ุฏุชุงุณูุชุฑ                     |

### โค ูุซุงู (RF = 3ุ ุณุงุฒฺฏุงุฑ = QUORUM):

- ฒ ุงุฒ ณ ููุฏ ุจุงุฏ ุชุฃุฏ ฺฉููุฏ  
- ุงฺฏุฑ ฒ ููุฏ ูพุงุณุฎ ุฏููุฏ โ โ ูููู  
- ุงฺฏุฑ ููุท ฑ ููุฏ ูพุงุณุฎ ุฏูุฏ โ โ ุดฺฉุณุช

---

## ๐ Hinted Handoff (ุจุงุฒูพุฎุด ุงุฏุฏุงุดุช)

ููุช ฺฉ ูุณุฎู **down** ุงุณุชุ ฺฉุงุณุงูุฏุฑุง ูโุชูุงูุฏ ฺฉ **ุงุฏุฏุงุดุช (hint)** ุฑู ููุฏ ุฏฺฏุฑ ุฐุฎุฑู ฺฉูุฏ ุชุง ุจุนุฏุงู ุขู ุฑุง ุจุงุฒูพุฎุด ฺฉูุฏ.

### โค ูุซุงู (RF = 3ุ ฑ ููุฏ downุ ุณุงุฒฺฏุงุฑ = QUORUM):

- ููุงููฺฏโฺฉููุฏู ุฑู ฒ ููุฏ ููุฌูุฏ ููููุชโุขูุฒ ูโููุณุฏ โ  
- ุงุฏุฏุงุดุช ุจุฑุง ููุฏ ุณูู (down) ุฐุฎุฑู ูโฺฉูุฏ  
- ููุช ููุฏ ุณูู ุขููุงู ุดูุฏ โ ููุงููฺฏโฺฉููุฏู ุงุฏุฏุงุดุช ุฑุง ุจุงุฒูพุฎุด ูโฺฉูุฏ ู ุฏุงุฏูโูุง ููฺฏุงูโุณุงุฒ ูโุดููุฏ

### โ๏ธ ูฺฉุงุช ููู

- ุงุฏุฏุงุดุชโูุง ุจู ุทูุฑ ูพุดโูุฑุถ ณ ุณุงุนุช ูฺฏูุฏุงุฑ ูโุดููุฏ.  
- ุจุนุฏ ุงุฒ ณ ุณุงุนุชุ ุงฺฏุฑ ููุฏ ูููุฒ down ุจุงุดุฏ ููฺฉู ุงุณุช ุฏุงุฏูโูุง ุฑุง ุงุฒ ุฏุณุช ุจุฏูุฏ.  
- ฺฉุงุณุงูุฏุฑุง ููฺฏุงู ุฎูุงูุฏู ุงู ูุดฺฉู ุฑุง ุจุง **Read Repair** ุฌุจุฑุงู ูโฺฉูุฏ (ุจุนุฏุงู ุชูุถุญ ุฏุงุฏู ูโุดูุฏ).

---

## โ ุงุฌุชูุงุจ ุงุฒ ุงุณุชูุงุฏู ุงุฒ ุณุทุญ ุณุงุฒฺฏุงุฑ โANYโ ุจุฑุง ููุดุชู

- ููุดุชู ุญุช ุงฺฏุฑ **ุชูุงู ูุณุฎูโูุง down ุจุงุดูุฏ** ููููุชโุขูุฒ ุงุณุช ฺูู ุงุฏุฏุงุดุช ุฐุฎุฑู ูโฺฉูุฏ.  
- ุงูุง ุฏุงุฏู ูููุฒ ุฑู ูฺ ูุณุฎูโุง ุจู ุทูุฑ ฺฉุงูู ููุดุชู ูุดุฏู ุงุณุช.  
- ุงฺฏุฑ ููุงููฺฏโฺฉููุฏู ูุจู ุงุฒ ุจุงุฒูพุฎุด ุงุฏุฏุงุดุชโูุง ฺฉุฑุด ฺฉูุฏ โ ููฺฉู ุงุณุช ุฏุงุฏู ุงุฒ ุฏุณุช ุจุฑูุฏ.

### ๐บ ููุท ุฏุฑ ุตูุฑุช ุงุฒ `ANY` ุงุณุชูุงุฏู ฺฉูุฏ ฺฉู ุฑุณฺฉ ุขู ุฑุง ูพุฐุฑูุชูโุงุฏ.

---

## ๐ ุณุทูุญ ุณุงุฒฺฏุงุฑ ุฎูุงูุฏู ุฏุฑ ฺฉุงุณุงูุฏุฑุง

ุณุทูุญ ุณุงุฒฺฏุงุฑ ุจุฑุง ุฎูุงูุฏู ูุดุฎุต ูโฺฉูุฏ ฺูุฏ ูุณุฎู ุจุงุฏ ูพุงุณุฎ ุฏููุฏ ุชุง ุฏุงุฏู ุจุฑฺฏุฑุฏุงูุฏู ุดูุฏ.

### โค ูุซุงู:

ุงฺฏุฑ `RF = 3` ู ุณุทุญ ุณุงุฒฺฏุงุฑ ุฎูุงูุฏู `QUORUM` ุจุงุดุฏ:

- ููุงููฺฏโฺฉููุฏู ููุชุธุฑ ูพุงุณุฎ ุญุฏุงูู ฒ ููุฏ ูโูุงูุฏ.  
- ุงฺฏุฑ ฒ ููุฏ ูพุงุณุฎ ุฏููุฏุ ุฏุงุฏู ุจู ฺฉูุงูุช ุจุฑูโฺฏุฑุฏุฏ.  
- ุงฺฏุฑ ฺฉูุชุฑ ุงุฒ ฒ ูพุงุณุฎ ุฏููุฏ โ ุฎูุงูุฏู ุดฺฉุณุช ูโุฎูุฑุฏ.

---

## ๐ ุฑุณุฏู ุจู ุณุงุฒฺฏุงุฑ ูู (Strong Consistency)

ฺฉุงุณุงูุฏุฑุง ุณุงุฒฺฏุงุฑ ูู ุฑุง ุชุถูู ูโฺฉูุฏ ุงฺฏุฑ:  
`R + W > RF`  

ฺฉู ุฏุฑ ุขู:  
- **R** = ุชุนุฏุงุฏ ููุฏูุง ูพุงุณุฎโุฏููุฏู ุจู ุฎูุงูุฏู  
- **W** = ุชุนุฏุงุฏ ููุฏูุง ุชุฃุฏฺฉููุฏู ููุดุชู  
- **RF** = ุนุงูู ุชฺฉุฑุงุฑ

### โค ูุซุงู 1: ุณุงุฒฺฏุงุฑ ูู ุจุง RF=3

- ุณุงุฒฺฏุงุฑ ููุดุชู = QUORUM (W = 2)  
- ุณุงุฒฺฏุงุฑ ุฎูุงูุฏู = QUORUM (R = 2)  
- ฺูู ฒ + ฒ > ณ โ ุฎูุงูุฏู ููุดู ุฌุฏุฏุชุฑู ุฏุงุฏู ุฑุง ูุดุงู ูโุฏูุฏ.

### โค ูุซุงู 2: ุญุงูุช ุณุงุฒฺฏุงุฑ ุถุนู

- ุณุงุฒฺฏุงุฑ ููุดุชู = ONE (W = 1)  
- ุณุงุฒฺฏุงุฑ ุฎูุงูุฏู = ONE (R = 1)  
- ฑ + ฑ = ฒ โค ณ โ ุฎูุงูุฏู ููฺฉู ุงุณุช ุฏุงุฏูโูุง ูุฏู ุฑุง ูุดุงู ุฏูุฏ.

---

## ๐ต๏ธโโ๏ธ Snitch: ุจูููโุณุงุฒ ูุฒุฏฺฉ ู ุณุฑุนุช ููุฏูุง

**Snitch** ุจู ฺฉุงุณุงูุฏุฑุง ุงุทูุงุนุงุช ุชููพูููฺ ุดุจฺฉู ูโุฏูุฏ:

- ูุดุฎุต ูโฺฉูุฏ ฺฉุฏุงู ููุฏูุง ุฏุฑ ฺฉุฏุงู ุฏุชุงุณูุชุฑ ู ุฑฺฉ ูุณุชูุฏ.  
- ุฏุฑุฎูุงุณุชโูุง ุฑุง ุจู ูุฒุฏฺฉโุชุฑู ู ุณุฑุนโุชุฑู ููุฏ ูุฏุงุช ูโฺฉูุฏ.  
- ฺฉูฺฉ ูโฺฉูุฏ ูุณุฎูโูุง ุฏุฑ ุฑฺฉโูุง ูุฎุชูู ูุฑุงุฑ ุจฺฏุฑูุฏ ุชุง ููุงุท ุดฺฉุณุช ฺฉุงูุด ุงุจูุฏ.

---

## โก ฺุทูุฑ ฺฉุงุณุงูุฏุฑุง ุฎูุงูุฏู ุงูุฌุงู ูโุฏูุฏ

1. ููุงููฺฏโฺฉููุฏู ุณุฑุนโุชุฑู ูุณุฎู ุฑุง ุงูุชุฎุงุจ ู ุฏุฑุฎูุงุณุช ฺฉุงูู ุฎูุงูุฏู ูโูุฑุณุชุฏ.  
2. ุฏุฑุฎูุงุณุช **digest** (ฺฺฉโุณุงู) ุงุฒ ุณุงุฑ ูุณุฎูโูุง ุจุฑุง ุตุญุช ุฏุงุฏู ูโฺฉูุฏ.  
3. ุงฺฏุฑ digestูุง ุจุฑุงุจุฑ ูุจุงุดูุฏุ ุฏุงุฏู ฺฉุงูู ุงุฒ ููู ูุณุฎูโูุง ุฎูุงูุฏู ูโุดูุฏ ุชุง ุฌุฏุฏุชุฑู ูุณุฎู ูพุฏุง ุดูุฏ.  
4. ุฌุฏุฏุชุฑู ุฏุงุฏู ุจู ฺฉูุงูุช ุจุฑฺฏุฑุฏุงูุฏู ูโุดูุฏ.  
5. ุจู ุตูุฑุช ูุงููุฒูุงู **Read Repair** ุจุฑุง ุงุตูุงุญ ูุณุฎูโูุง ูุฏู ุขุบุงุฒ ูโุดูุฏ.

---

## ๐ง Read Repair: ุญูุธ ุณุงุฒฺฏุงุฑ ุฏุงุฏูโูุง

- ูุณุฎูโูุง ูุงููฺฏุงู ุฏุฑ ุทูู ุฎูุงูุฏู ุงุตูุงุญ ูโุดููุฏ.  
- ุงุฒ timestamps ุจุฑุง ุชุดุฎุต ุฌุฏุฏุชุฑู ุฏุงุฏู ุงุณุชูุงุฏู ูโฺฉูุฏ.  
- ุจู ุตูุฑุช ุงุญุชูุงู (ูุซูุงู ฑฐูช ุฎูุงูุฏูโูุง) ุงุฌุฑุง ูโุดูุฏ ุชุง ุจุงุฑ ุณุณุชู ุฒุงุฏ ูุดูุฏ.  
- ุจู ุตูุฑุช ูุงููุฒูุงู ุงุฌุฑุง ุดุฏู ู ุจุงุนุซ ูููู ุฏุฑ ูพุงุณุฎ ุจู ฺฉูุงูุช ููโุดูุฏ.

### ูุซุงู

ูุฑุถ ฺฉูุฏ RF=3 ู ููุฏูุง: Node Aุ Node B ู Node C.

1. ฺฉ ุจูโุฑูุฒุฑุณุงู ุฑุฎ ูโุฏูุฏ:  
   ุฏุงุฏู ุฑู Node A ู Node B ููุดุชู ุดุฏู ุงุณุช.  
   Node C ุขููุงู ุจูุฏู ู ุจูโุฑูุฒุฑุณุงู ุฑุง ุฏุฑุงูุช ูฺฉุฑุฏู ุงุณุช.

2. ฺฉูุงูุช ุฎูุงูุฏู ุจุง ุณุงุฒฺฏุงุฑ QUORUM ุงูุฌุงู ูโุฏูุฏ:  
   ููุงููฺฏโฺฉููุฏู ุฏุงุฏู ฺฉุงูู ุฑุง ุงุฒ Node A ูโฺฏุฑุฏ.  
   digestูุง ุฑุง ุงุฒ Node B ู Node C ูโฺฏุฑุฏ.

3. ูุงุณุงุฒฺฏุงุฑ ุชุดุฎุต ุฏุงุฏู ูโุดูุฏ:  
   digest Node C ุจุง A ู B ูุชูุงูุช ุงุณุช.

4. Read Repair ุงุฌุฑุง ูโุดูุฏ:  
   ููุงููฺฏโฺฉููุฏู ุฌุฏุฏุชุฑู ุฏุงุฏู ุฑุง ุงุฒ A ุง B ูโฺฏุฑุฏ.  
   ุฏุงุฏู ุจู Node C ุงุฑุณุงู ูโุดูุฏ ุชุง ุงุตูุงุญ ุดูุฏ.  
   ฺฉูุงูุช ุฌุฏุฏุชุฑู ุฏุงุฏู ุฑุง ุฏุฑุงูุช ูโฺฉูุฏ.

---

## ๐ ูพุฑูุชฺฉู Gossip: ููฺฏุงูโุณุงุฒ ูุถุนุช ฺฉูุงุณุชุฑ

- ููุฏูุง ูุฑ ุซุงูู ุจุง ฑ ุชุง ณ ููุฏ ุชุตุงุฏู ูุถุนุช ุฎูุฏ ุฑุง ุชุจุงุฏู ูโฺฉููุฏ.  
- ุงุฒ ุดูุงุฑูโูุง ูุณู ุจุฑุง ุชุดุฎุต ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุงุณุชูุงุฏู ูโฺฉูุฏ.  
- Seed nodeูุง ุจู ููุฏูุง ุฌุฏุฏ ฺฉูฺฉ ูโฺฉููุฏ ุจู ฺฉูุงุณุชุฑ ููุญู ุดููุฏ.  
- ุงุทููุงู ูโุฏูุฏ ููู ููุฏูุง ุงุทูุงุนุงุช ุจูโุฑูุฒ ุฏุงุฑูุฏ.

---

## โฐ ุดูุงุณุง ุฎุทุง ุจุง Phi Accrual Failure Detector

- ุฎุทุงูุง ููุฏ ุฑุง ุจุง ุณุทูุญ ุดฺฉ ุชุทุจู ุดูุงุณุง ูโฺฉูุฏ (ูู ููุท ุฒูุฏู/ูุฑุฏู).  
- ฺฉุงูุด ูุซุจุชโูุง ฺฉุงุฐุจ ูุงุด ุงุฒ ุชุฃุฎุฑ ุดุจฺฉู.  
- ุจู ุชุฏุฑุฌ ููุฏูุง ฺฉูุฏ ุง ุฎุฑุงุจ ุฑุง ููุฒู ูโฺฉูุฏ.

---

## โ๏ธ ุฑููุฏ ููุดุชู ุฏุฑ ฺฉุงุณุงูุฏุฑุง

1. ููุดุชู ุงุจุชุฏุง ุจู **commit log** ุฑู ุฏุณฺฉ ุงูุฒูุฏู ูโุดูุฏ (ุจุฑุง ุฏูุงู ุฏุงุฏู).  
2. ุฏุงุฏู ุจู **MemTable** (ุณุงุฎุชุงุฑ ูุฑุชุจ ุฏุฑ ุญุงูุธู) ุงุถุงูู ูโุดูุฏ.  
3. ููุช MemTable ูพุฑ ุดุฏุ ุจู ุตูุฑุช ฺฉ **SSTable** ุบุฑูุงุจู ุชุบุฑ ุฑู ุฏุณฺฉ ุฐุฎุฑู ูโุดูุฏ.  
4. ุนููุงุช **compaction** ุฏูุฑูโุง SSTableูุง ุฑุง ุงุฏุบุงู ู ุจููู ูโฺฉูุฏ.

---

## ๐ Commit Log

- ูุงฺฏ ูพุดโููุณ ููุดุชู ุดุฏู ุฑู ุฏุณฺฉ.  
- ุชุถูู ุฏูุงู ุฏุงุฏู ุฏุฑ ุตูุฑุช ฺฉุฑุด.  
- ููุดุชู ุชุง ฺฉุงูู ุดุฏู Commit Log ุชุฃุฏ ููโุดูุฏ.

---

## ๐ง MemTable

- ุฐุฎุฑูโุณุงุฒ ูููุช ู ุฏุฑ ุญุงูุธู.  
- ูุฑุชุจ ุดุฏู ุจุฑ ุงุณุงุณ ฺฉูุฏ ูพุงุฑุชุดู ู ุณุชููโูุง ุฎูุดูโุง.  
- ุฎูุงูุฏู ู ููุดุชู ุณุฑุน.  
- ฺูุฏู MemTable ูุฌูุฏ ุฏุงุฑุฏ ููฺฏุงู ููุด ุดุฏู.

---

## ๐ฝ SSTables (ุฌุฏุงูู ุฑุดุชูโุง ูุฑุชุจ)

- ูุงูโูุง ุบุฑูุงุจู ุชุบุฑ ุฑู ุฏุณฺฉ ูพุณ ุงุฒ ููุด MemTable.  
- ุดุงูู ูพุงุฑุชุดูโูุง ู ุฑุฏูโูุง ูุฑุชุจ ุดุฏู.  
- ุจูโุฑูุฒุฑุณุงูโูุง ุจุงุนุซ ุงุฌุงุฏ SSTable ุฌุฏุฏ ูโุดููุฏุ SSTableูุง ูุฏู ูพุณ ุงุฒ compaction ุญุฐู ูโุดููุฏ.

---

## ๐๏ธ Tombstones: ุญุฐู ูุฑู

- ุญุฐูโูุง ุจุง **tombstone** ุนูุงูุชโฺฏุฐุงุฑ ูโุดููุฏุ ูู ุญุฐู ููุฑ.  
- tombstoneูุง ูพุณ ุงุฒ ~ฑฐ ุฑูุฒ (ูุงุจู ุชูุธู) ูููุถ ูโุดููุฏ.  
- ุฏุฑ compaction ุญุฐู ูโุดููุฏ ุชุง ูุถุง ุขุฒุงุฏ ุดูุฏ.  
- tombstone ุฒุงุฏ ุจุงุนุซ ฺฉูุฏ ุฎูุงูุฏู ู ูุตุฑู ูุถุง ุจุดุชุฑ ูโุดูุฏ.

---

## โก ุฎูุงูุฏู ุฏุงุฏู ุฏุฑ ฺฉุงุณุงูุฏุฑุง

1. ฺฺฉ ฺฉุฑุฏู **Row Cache** ุจุฑุง ุฑุฏูโูุง ูพุฑ ุงุณุชูุงุฏู.  
2. ุฏุฑ ุตูุฑุช ุนุฏู ุงูุชูุ ฺฺฉ ฺฉุฑุฏู **Bloom filter** ุจุฑุง ุฑุฏ ุณุฑุน SSTableูุง ุจุฏูู ุฏุงุฏู.  
3. ุงุณุชูุงุฏู ุงุฒ **Key Cache** ุจุฑุง ุงูุชู ูฺฉุงู ูพุงุฑุชุดู.  
4. ุฌุณุชุฌู ุฏุฑ **Partition Index Summary** ู **Partition Index** ุจุฑุง ุงูุชู ุขูุณุช ุฏุงุฏู.  
5. ุฎูุงูุฏู ุงุฒ MemTable ู SSTableูุง ุจุฑุง ุฏุฑุงูุช ุฌุฏุฏุชุฑู ูุณุฎู.

---

## ๐ Compaction

- ุงุฏุบุงู ฺูุฏ SSTable ุจู ฺฉ.  
- ุญุฐู ุฏุงุฏูโูุง ูุฏู ู tombstoneูุง.  
- ฺฉุงูุด ุชุนุฏุงุฏ SSTableูุง ฺฉู ุจุงุฏ ุฎูุงูุฏู ุดููุฏ.  
- ุงุณุชุฑุงุชฺโูุง:  
  - **SizeTiered** (ูพุดโูุฑุถุ ููุงุณุจ ููุดุชู ุฒุงุฏ)  
  - **Leveled** (ุจูููโุดุฏู ุจุฑุง ุฎูุงูุฏู)  
  - **TimeWindow** (ููุงุณุจ ุฏุงุฏูโูุง ุฒูุงูโูุญูุฑ)

---

## ๐ฏ ูุซุงูโูุง

### ูุซุงู 1: ุฎูุงูุฏู ุจุง ุณุงุฒฺฏุงุฑ Quorum

- `RF = 3`ุ `W = 2`ุ `R = 2` (quorum)  
- ููุดุชู ุฑู ูุฑ ฒ ููุฏุ ุฎูุงูุฏู ุงุฒ ูุฑ ฒ ููุฏ.  
- ุชุถูู ูโฺฉูุฏ `R + W > RF` โ ุณุงุฒฺฏุงุฑ ูู.

### ูุซุงู 2: ุณูุงุฑู Tombstone

- ุฏุงุฏู ุฑู Node A (ฺฉู down ุงุณุช) ุญุฐู ุดุฏู.  
- Node B ูููุฒ ุฏุงุฏู ุฑุง ุฏุงุฑุฏ.  
- tombstone ุชุถูู ูโฺฉูุฏ ููุช Node A ุจุงุฒุงุจ ู ููฺฏุงูโุณุงุฒ ุดูุฏุ ุฏุงุฏู ุญุฐู ุดุฏู ุจุงุฒ ูฺฏุฑุฏุฏ.

---

